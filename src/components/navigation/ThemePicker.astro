---
import { modes, colors, gradients } from "./Themes";
import { icons } from "../Icons";
---

{
  colors.map((color) =>
    modes.map((mode) => {
      const gradientId =
        "icon-gradient-" + Math.round(Math.random() * 10e12).toString(36);
      const gradient = gradients[mode][color] ?? ["", "", ""];
      return (
        <div
          id={`div-${color}-${mode}`}
          class={`theme-${color} theme-${mode} ${mode} theme-button`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 256 256"
            aria-hidden="true"
            stroke={`url(#${gradientId})`}
            fill={`url(#${gradientId})`}
          >
            <g set:html={icons["color-palette-2"]} />
            <linearGradient
              id={gradientId}
              x1="23"
              x2="235"
              y1="43"
              y2="202"
              gradientUnits="userSpaceOnUse"
            >
              <stop stop-color={gradient[0]} />
              <stop offset=".5" stop-color={gradient[1]} />
              <stop offset="1" stop-color={gradient[2]} />
            </linearGradient>
          </svg>
        </div>
      );
    }),
  )
}

<script>
  import { modes, colors } from "./Themes";

  modes.forEach((mode) => {
    colors.forEach((color) => {
      const button = document.querySelector(`#div-${color}-${mode}`);
      button?.addEventListener("click", () =>
        window.setTheme?.(color, mode, true),
      );
    });
  });
</script>

<style>
  .theme-button {
    padding: calc(var(--spacing) * 1.5);
    border-radius: var(--radius-4xl);
    margin: 8px;
  }
  .dark {
    background-color: #0f0f0f;
    display: inline-block;
    width: fit-content;
    height: fit-content;
    box-shadow: var(--shadow-sm);
  }
  .light {
    background-color: #f5f5f5;
    display: inline-block;
    width: fit-content;
    height: fit-content;
    box-shadow: var(--shadow-sm);
  }
</style>
